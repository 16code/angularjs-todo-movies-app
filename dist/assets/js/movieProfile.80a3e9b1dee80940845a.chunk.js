webpackJsonp([8],{61:function(e,i,o){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var t=o(3),r=_interopRequireDefault(t),a=o(1),s=_interopRequireDefault(a),n=o(2),l=_interopRequireDefault(n),p=o(7),d=_interopRequireDefault(p),c=(0,d["default"])(),v=function(){function FavoritesService(e,i,o,t){"ngInject";(0,s["default"])(this,FavoritesService),(0,r["default"])(this,{$resource:e,$q:i,API:o,ErrorHandler:t}),this[c]=this.ErrorHandler.catcher.bind(this.ErrorHandler)}return FavoritesService.$inject=["$resource","$q","API","ErrorHandler"],(0,l["default"])(FavoritesService,[{key:"$list",value:function $list(e){var i=this,o=this.$resource(this.API+"/account/:userId/favorite/:type",{},{get:{cache:!1}});return this.$q(function(t,r){var a=o.get(e).$promise;a.then(function(e){return t(e)},function(e){return r(e),i[c](e.code)})})}},{key:"$favoriteState",value:function $favoriteState(e){var i=this,o=this.$resource(this.API+"/movie/:id/account_states");return this.$q(function(t,r){var a=o.get(e).$promise;a.then(function(e){return t(e)},function(e){return r(e),i[c](e.code)})})}},{key:"$favorite",value:function $favorite(e){var i=this.$resource(this.API+"/account/:id/favorite?",{id:"@media_id",session_id:"@session"});return this.$q(function(o,t){var r=i.save(e).$promise;r.then(function(e){return o(e)},function(e){return t(e)})})}}]),FavoritesService}();i["default"]=v},141:function(e,i,o){i=e.exports=o(4)(),i.push([e.id,".movie-profile{width:100%;background-color:#fff}.movie-profile .basic-info .backdrop,.movie-profile .basic-info .poster-box{position:relative;color:#e5e5e5}.movie-profile .basic-info .backdrop{height:520px;overflow:hidden}@media screen and (max-width:980px){.movie-profile .basic-info .backdrop{height:420px}}@media screen and (max-width:768px){.movie-profile .basic-info .backdrop{height:520px}}.movie-profile .basic-info .poster-background{position:absolute;top:50%;left:50%;width:100%;max-width:100%;transform:translate3d(-50%,-50%,0);-webkit-filter:brightness(30%);filter:brightness(30%)}@media screen and (max-width:980px){.movie-profile .basic-info .poster-background{height:100%}}.movie-profile .basic-info .overview{position:absolute;left:0;right:0;top:0;bottom:0;background:-webkit-linear-gradient(rgba(0,210,255,.2),rgba(164,205,214,.37) 45%,rgba(0,0,0,.9));background:linear-gradient(rgba(0,210,255,.2),rgba(164,205,214,.37) 45%,rgba(0,0,0,.9));display:flex;align-items:flex-end;justify-content:center;text-shadow:0 0 1px rgba(0,0,0,.5)}.movie-profile .basic-info .overview .info{padding:20px;width:96%}.movie-profile .basic-info .overview .label{display:inline-block;min-width:80px;letter-spacing:2px;padding-right:1rem}.movie-profile .basic-info .overview .title{color:#fff;margin-bottom:1rem;text-shadow:0 0 2px rgba(0,0,0,.5);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.movie-profile .basic-info .overview p{font-size:1.4rem}.movie-profile .basic-info .overview .overview-text{margin-top:1rem;max-height:200px;padding-bottom:3rem;overflow:auto}.movie-profile .basic-info .handle{margin-bottom:1.5rem}.movie-profile .basic-info .handle .btn{border-radius:4px;background-color:transparent;border-width:2px;color:#e5e5e5;margin-right:1rem}.movie-profile .basic-info .handle .btn.true,.movie-profile .basic-info .handle .btn:hover{color:#eec141}.movie-profile .basic-info .handle .icons{font-size:1.8rem;vertical-align:text-top;padding-right:.5rem}.movie-profile .production-info{display:flex;flex-direction:column}.movie-profile .production-info>div{padding:3rem;color:#fff}.movie-profile .production-info .companies{background:#584d99}.movie-profile .production-info .companies li{display:inline-block;padding-right:1.5rem}.movie-profile .production-info .tags{background:#786cc2}.movie-profile .production-info .tags .badge{padding:.5rem .8rem;border-radius:5px}.movie-profile .production-info .tags .badge:hover{background-color:#40396a}.movie-profile .production-info .tags li{display:inline-block;margin-right:.625rem;margin-bottom:.5rem}.movie-profile .production-info .crews{background:#665aaa}.movie-profile .production-info .crews li{display:inline-block;padding-right:1rem;width:24%;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.movie-profile .production-info .crews li span{color:#e2e2e2}@media screen and (max-width:980px){.movie-profile .production-info .crews{max-height:500px;overflow:auto}.movie-profile .production-info .crews li{width:45%}}.movie-profile .production-info .casts{justify-content:flex-start;flex-wrap:wrap}.movie-profile .production-info .casts li{padding:1.5rem 0;text-align:center;width:10%}.movie-profile .production-info .casts li span{display:block;max-width:96%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:1rem}@media screen and (max-width:1280px){.movie-profile .production-info .casts li{width:12.5%}}@media screen and (max-width:1024px){.movie-profile .production-info .casts li{width:16.66667%}}@media screen and (max-width:780px){.movie-profile .production-info .casts li{width:25%}}@media screen and (max-width:580px){.movie-profile .production-info .casts li{width:50%}}.movie-profile .production-info .casts img{background-color:#494885;border-radius:50%;border:2px solid #fff}.movie-profile .posters-images{background:#4f4491}.movie-profile .posters-images ul{margin-left:-1rem;margin-right:-1rem;flex-wrap:wrap;justify-content:flex-start}.movie-profile .posters-images li{width:200px;height:112px;padding:1rem}@media screen and (max-width:960px){.movie-profile .posters-images li{padding:.5rem}}.movie-profile .posters-images .thumbnail{width:100%;height:101px;background-color:#494885;border:2px solid #fff;transition:all .2s ease-in-out}.movie-profile .posters-images .thumbnail.loaded img{opacity:0}.movie-profile .more-images{padding:1.5rem 0}.movie-profile .btn-more{background:#665aaa;border-color:#7266ba;color:#fff}.movie-profile .empty-list{color:#3b326e}.movie-profile .s-title{margin-bottom:1rem}",""])},158:function(e,i,o){var t=o(141);"string"==typeof t&&(t=[[e.id,t,""]]);o(5)(t,{});t.locals&&(e.exports=t.locals)},180:function(e,i){e.exports='<breadcrumb></breadcrumb> <div class=page-title> <h4>{{vm.movie.title}} ({{vm.movie.original_title}})</h4> </div> <div class="root-wrapper movie-animate"> <div class=movie-profile> <div class=basic-info> <div class=poster-box> <div class="backdrop thumbnail"> <img class=poster-background ng-src={{$root.image_uri}}/original{{vm.movie.backdrop_path}}> </div> <div class=overview> <div class=info> <h3 class=title>{{vm.movie.title}} ({{vm.movie.original_title}})</h3> <div class=handle> <button type=button class="btn favorite" ng-click=vm.favoriteHandle(vm.movie.id); ng-class="{\'true\': vm.isFavorite.favorite}"> <i class="icons icon-heart"></i> <span ng-if=vm.isFavorite.favorite>取消收藏</span> <span ng-if=!vm.isFavorite.favorite>收藏</span> </button> <button type=button class="btn watch"> <i class="icons icon-eye"></i> <span>添加到观看列表</span> </button> <button type=button class="btn rate"> <i class="icons icon-star"></i> <span>评分</span> </button> </div> <p> <span class=label>评分:</span> <span>{{vm.movie.vote_average}} </span> </p> <p ng-if=vm.movie.runtime> <span class=label>时长:</span> <span>{{vm.movie.runtime}} 分钟</span> </p> <p> <span class=label>发行时间: </span> <span>{{vm.movie.release_date}}</span> </p> <p ng-if=vm.movie.spoken_languages.name> <span class=label>语言:</span> <span>{{vm.movie.spoken_languages.name}}</span> </p> <p> <span class=label>类型:</span> <span ng-repeat="genre in vm.movie.genres">{{genre.name}} </span> </p> <p class=overview-text ng-if=vm.movie.overview>剧情简介: {{vm.movie.overview}}</p> </div> </div> </div> </div> <div class="production-info bg-white-only"> <div class="tags root-wrapper" ng-if=vm.tags.$resolved> <h5 class=s-title>标签</h5> <ul> <li ng-repeat="tag in vm.tags track by $index"> <a ui-sref="root.layout.tag({name:tag.name, id: tag.id})"> <span class="badge badge-purple">{{tag.name}}</span> </a> </li> </ul> <div class=empty-list ng-if="vm.tags.$resolved && !vm.tags.length">此影片暂时还没有任何标签</div> </div> <div class="casts-box bg-primary root-wrapper"> <h5 class=s-title>演员表</h5> <ul class="casts flex-middle-center"> <li ng-repeat="cast in vm.credits.cast.slice(0,10)" ng-if=cast.profile_path> <img ng-src={{$root.image_uri}}/w264_and_h264_bestv2{{cast.profile_path}} alt={{cast.name}} width=100 height=100 /> <span>{{cast.name}}</span> </li> </ul> </div> <div class="crews root-wrapper"> <h5 class=s-title>职员表</h5> <ul> <li ng-repeat="crew in vm.credits.crew">{{crew.job}} -- <span>{{crew.name}}</span></li> </ul> </div> <div class="companies root-wrapper"> <h5 class=s-title>出品公司</h5> <ul> <li ng-repeat="compan in vm.movie.production_companies">{{compan.name}}</li> </ul> </div> <div class="posters-images root-wrapper"> <h5 class=s-title>海报 (剧照) <b class="badge badge-warning" ng-if=vm.posters.length>{{vm.posters.length}}</b></h5> <loading-bar infinite=true></loading-bar> <ul class=flex-middle-center> <li ng-repeat="poster in vm.posters track by $index"> <div class="thumbnail lazyimg"> <img imgload={{$root.image_uri}}/w533_and_h300_bestv2{{poster.file_path}} alt={{vm.movie.title}}> </div> </li> </ul> <div class=empty-list ng-if="vm.posters.$resolved && !vm.posters.length">此影片暂时没有相关海报或剧照</div> <div class=more-images ng-if=vm.posters.length> <a href=# class="btn btn-more">查看更多剧照</a> </div> </div> </div> </div> </div>'},240:function(e,i,o){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0}),o(158);var t=o(61),r=_interopRequireDefault(t),a=o(241),s=_interopRequireDefault(a),n=angular.module("app.pages.moviceProfile",[]).service("FavoriteApi",r["default"]).controller(s["default"].name,s["default"]);i["default"]=n.name},241:function(e,i,o){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var t=o(7),r=_interopRequireDefault(t),a=o(3),s=_interopRequireDefault(a),n=o(1),l=_interopRequireDefault(n),p=o(2),d=_interopRequireDefault(p),c=(0,r["default"])(),v=(0,r["default"])(),f=function(){function MovieProfileController(e,i,o,t,r,a,n){"ngInject";(0,l["default"])(this,MovieProfileController),(0,s["default"])(this,{$rootScope:e,$document:i,$timeout:o,movieProfile:t,RouterHelper:r,MoviesApi:a,FavoriteApi:n}),this.movie=this.movieProfile.profile,this.credits=this.movieProfile.credits,this[v]=!1,this[c]=!1,this.scrollFunc=null,r.updateDocTitle(this.movie.title),this.activate()}return MovieProfileController.$inject=["$rootScope","$document","$timeout","movieProfile","RouterHelper","MoviesApi","FavoriteApi"],(0,d["default"])(MovieProfileController,[{key:"activate",value:function activate(){this.getMovieKeyWords(),this.$rootScope.userIsLoggedIn&&this.$rootScope.user.session&&this.validateFavoriteState()}},{key:"validateFavoriteState",value:function validateFavoriteState(){var e=this,i={session_id:this.$rootScope.user.session,id:this.movie.id};this.FavoriteApi.$favoriteState(i).then(function(i){e.isFavorite=i})}},{key:"getMovieKeyWords",value:function getMovieKeyWords(){var e=this;this.MoviesApi.$profile({id:this.movie.id,type:"keywords"}).then(function(i){e.tags=i.keywords,e.tags.$resolved=i.$resolved,e.loadImages()},function(i){console.log(i),e.tags.$resolved=!0})}},{key:"loadImages",value:function loadImages(){var e=this;this[v]=!0,this.MoviesApi.$profile({id:this.movie.id,type:"images",language:"en"}).then(function(i){angular.element(e.$document[0]).unbind("scroll"),e.backdrops=i.backdrops,e.posters=i.posters.slice(0,10),e.posters.$resolved=i.$resolved},function(i){console.log(i),e[v]=!1,e.posters.$resolved=!0})}},{key:"favoriteHandle",value:function favoriteHandle(e){var i=this,o={session:this.$rootScope.user.session,media_type:"movie",media_id:e,favorite:!this.isFavorite.favorite};this.FavoriteApi.$favorite(o).then(function(){i.isFavorite.favorite=!i.isFavorite.favorite})}}]),MovieProfileController}();i["default"]=f}});