webpackJsonp([4],{9:function(e,i,t){i=e.exports=t(4)(),i.push([e.id,".pagination-box{padding:20px 15px 40px}.pagination{text-align:center}.pagination li{font-size:1.6rem;line-height:1;display:inline-block;margin:0 .2em;cursor:pointer;-webkit-user-select:none;user-select:none;border:1px solid;border-color:#d8e1e3;border-radius:.25em;background:#fff;box-shadow:0 1px 1px rgba(90,90,90,.1)}.pagination li.current,.pagination li:hover{color:#58666e;background-color:#edf1f2;border-color:#c7d3d6}.pagination li.current{pointer-events:none;box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.pagination li:active{transform:scale(.9)}.pagination li.disabled{cursor:not-allowed;opacity:.8;color:#b5b5b5}.pagination li.disabled:hover{border-color:#d8e1e3;background-color:#fff}.pagination li.disabled:active{transform:scale(1)}.pagination li.separate{color:#b5b5b5;pointer-events:none}.pagination li a{cursor:pointer}.pagination li a,.pagination li span{display:block;padding:.6em .8em;color:inherit}",""])},10:function(e,i,t){var a=t(9);"string"==typeof a&&(a=[[e.id,a,""]]);t(5)(a,{});a.locals&&(e.exports=a.locals)},11:function(e,i){e.exports='<div class=pagination-box> <ul class=pagination ng-show="pagination.config.totalItems > 0"> <li ng-class="{disabled: pagination.config.currentPage == 1}" ng-click=pagination.prevPage()> <span>&laquo;</span> </li> <li ng-repeat="item in pagination.pageList track by $index" ng-class="{\'current\': item.page == pagination.config.currentPage, \'separate\': item.page == \'...\'}"> <a href={{item.uri}} ng-if=item.uri>{{item.page}}</a> <span ng-if=!item.uri>{{item.page}}</span> </li> <li ng-class="{disabled: pagination.config.currentPage == pagination.config.numberOfPages}" ng-click=pagination.nextPage()> <span>&raquo;</span> </li> </ul> </div>'},12:function(e,i,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var a=t(11),r=_interopRequireDefault(a);t(10);var n=t(13),o=_interopRequireDefault(n),s={bindings:{config:"<"},template:r["default"],controller:o["default"],controllerAs:"pagination"};i["default"]=angular.module("app.components.pagination",[]).component("pagination",s)},13:function(e,i,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var a=t(3),r=_interopRequireDefault(a),n=t(1),o=_interopRequireDefault(n),s=t(2),p=_interopRequireDefault(s),l=function(){function PaginationController(e,i,t,a){"ngInject";var n=this;(0,o["default"])(this,PaginationController),this.$onInit=function(){n.configUri=n.config.state,n.config.pagesLength=Number(n.config.pagesLength)||9,n.config.pagesLength%2===0&&(n.config.pagesLength=n.config.pagesLength-1),n.getPagination()},this.$onChanges=function(e){e.config.isFirstChange()||n.getPagination()},(0,r["default"])(this,{$scope:e,$element:i,$attrs:t,$state:a})}return PaginationController.$inject=["$scope","$element","$attrs","$state"],(0,p["default"])(PaginationController,[{key:"getPagination",value:function getPagination(){var e=this,i={page:"..."};if(e.config.currentPage=parseInt(e.config.currentPage,10)||1,e.config.totalItems=parseInt(e.config.totalItems,10)||0,e.config.itemsPerPage=parseInt(e.config.itemsPerPage,10)||20,e.config.numberOfPages=Math.ceil(e.config.totalItems/e.config.itemsPerPage),e.config.numberOfPages>0&&e.config.currentPage>e.config.numberOfPages&&(e.config.currentPage=e.config.numberOfPages),e.pageList=[],e.config.numberOfPages<=e.config.pagesLength)for(var t=1;t<=e.config.numberOfPages;t++)e.pageList.push(e.parseStateToUri(t));else{var a=(e.config.pagesLength-1)/2;if(e.config.currentPage<=a){for(var r=1;r<=a+1;r++)e.pageList.push(e.parseStateToUri(r));e.pageList.push(i),e.pageList.push(e.parseStateToUri(e.config.numberOfPages))}else if(e.config.currentPage>e.config.numberOfPages-a){e.pageList.push(e.parseStateToUri(1)),e.pageList.push(i);for(var n=a+1;n>=1;n--)e.pageList.push(e.parseStateToUri(e.config.numberOfPages-n));e.pageList.push(e.parseStateToUri(e.config.numberOfPages))}else{e.pageList.push(e.parseStateToUri(1)),e.pageList.push(i);for(var o=Math.ceil(a/2);o>=1;o--)e.pageList.push(e.parseStateToUri(e.config.currentPage-o));e.pageList.push(e.parseStateToUri(e.config.currentPage));for(var s=1;s<=a/2;s++)e.pageList.push(e.parseStateToUri(e.config.currentPage+s));e.pageList.push(i),e.pageList.push(e.parseStateToUri(e.config.numberOfPages))}}}},{key:"parseStateToUri",value:function parseStateToUri(e){var i=this.$state.href(this.config.state,{page:e},{absolute:!1});return{uri:i,page:e}}},{key:"changeCurrentPage",value:function changeCurrentPage(e){"..."!==e&&(this.config.currentPage=e)}},{key:"prevPage",value:function prevPage(){return this.config.currentPage>1&&(this.config.currentPage--,this.$state.go(this.config.state,{page:this.config.currentPage--}))}},{key:"nextPage",value:function nextPage(){return this.config.currentPage<this.config.numberOfPages&&(this.config.currentPage++,this.$state.go(this.config.state,{page:this.config.currentPage++}))}}]),PaginationController}();i["default"]=l},29:function(e,i,t){i=e.exports=t(4)(),i.push([e.id,".movies-wrapper{display:flex;flex-wrap:wrap;margin-left:-10px;margin-right:-10px}.movies-wrapper .movie-item{padding:10px;width:10%}@media screen and (max-width:1440px){.movies-wrapper .movie-item{width:12.5%}}@media screen and (max-width:1024px){.movies-wrapper .movie-item{width:20%}}@media screen and (max-width:580px){.movies-wrapper .movie-item{width:50%}}.movies-wrapper .movie{position:relative;border-radius:5px;overflow:hidden}.movies-wrapper .movie .thumbnail{display:block;width:100%;height:158px;border-radius:5px;box-shadow:0 0 3px 1px #abb1cf;position:relative;color:#fff}.movies-wrapper .movie .thumbnail img{width:100%;height:100%;border-radius:5px}@media screen and (max-width:1920px){.movies-wrapper .movie .thumbnail{height:198px}}@media screen and (max-width:1366px){.movies-wrapper .movie .thumbnail{height:188px}}@media screen and (max-width:1024px){.movies-wrapper .movie .thumbnail{height:200px}}@media screen and (max-width:768px){.movies-wrapper .movie .thumbnail{height:150px}}@media screen and (max-width:580px){.movies-wrapper .movie .thumbnail{height:190px}}.movies-wrapper .movie .play{border-radius:5px;transition:opacity .3s ease;opacity:0;position:absolute;left:0;top:0;width:100%;height:100%;z-index:3;padding:1rem;overflow:auto;background:radial-gradient(ellipse at center,rgba(0,0,0,.09) 0,rgba(0,0,0,.18) 10%,#353757 100%)}.movies-wrapper .movie .play a{position:relative;font-size:2.8rem;line-height:1;color:#dcdcdc}.movies-wrapper .movie .play a:before{border-radius:50%;content:'';border:2px solid;width:50px;height:50px;position:absolute;left:-15px;top:-12px}.movies-wrapper .movie .play a:hover{color:#eec141}.movies-wrapper .movie:hover .loaded .play{opacity:1}.movies-wrapper .movie .meta{font-size:1rem;padding:10px 0;position:relative}.movies-wrapper .movie .meta .name{color:#333;max-width:90%;font-size:1.3rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.movies-wrapper .movie .meta .star{position:absolute;left:auto;top:0;right:0;bottom:0;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center}.movies-wrapper .movie .meta .icon-star{color:#eec141;font-size:1.8rem}",""])},30:function(e,i,t){var a=t(29);"string"==typeof a&&(a=[[e.id,a,""]]);t(5)(a,{});a.locals&&(e.exports=a.locals)},31:function(e,i){e.exports='<div class=movie> <div class="thumbnail lazyimg"> <img imgload={{$root.image_uri}}/w342{{vm.movie.poster_path}}> <p class="play flex-middle-center"> <a ui-sref="root.layout.movies.movieProfile({id: vm.movie.id, name: vm.movie.original_title})"> <i class="icons icon-control-play"></i> </a> </p> </div> <div class=meta> <h5 class=name>{{vm.movie.title}}</h5> <p class=genre>{{vm.genre}}</p> <p class=star> <i class="icons icon-star"></i> <span class=number>{{vm.vote}}</span> </p> </div> </div>'},32:function(e,i,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0}),t(30);var a=t(31),r=_interopRequireDefault(a),n=t(33),o=_interopRequireDefault(n),s={bindings:{movie:"<"},template:r["default"],controller:o["default"],controllerAs:"vm"};i["default"]=angular.module("app.components.movieCard",[]).component("movieCard",s)},33:function(e,i,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var a=t(1),r=_interopRequireDefault(a),n=function MovieCardController(e){"ngInject";(0,r["default"])(this,MovieCardController),this.genre=e("parseGenre")(this.movie.genre_ids),this.vote=e("voteFilter")(this.movie.vote_average)};n.$inject=["$filter"],i["default"]=n},184:function(e,i){e.exports='<div class=page-title> <h4>与 <span class=text-warning>{{vm.title}}</span> 相关的电影</h4> <b class="badge badge-warning" ng-if=vm.totalResults>{{vm.totalResults}}</b> <p><small class=text-muted>{{vm.description}}</small></p> </div> <div class=root-wrapper> <div class=movies-wrapper ng-show=vm.movies.length> <movie-card ng-repeat="movie in vm.movies track by movie.id" movie=movie class=movie-item ng-if=movie.poster_path> </movie-card> </div> <loading-bar></loading-bar> </div> <pagination config=vm.paginationConfig ng-if="vm.movies.length && vm.totalResults > 20 "></pagination>'},218:function(e,i,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var a=t(8),r=_interopRequireDefault(a),n=t(16),o=_interopRequireDefault(n),s=t(14),p=_interopRequireDefault(s),l=t(15),u=_interopRequireDefault(l),g=t(3),c=_interopRequireDefault(g),f=t(1),d=_interopRequireDefault(f),m=t(2),v=_interopRequireDefault(m),h=t(7),b=_interopRequireDefault(h),P=(0,b["default"])(),x=function(){function TagServiceBase(e,i,t,a){"ngInject";(0,d["default"])(this,TagServiceBase),(0,c["default"])(this,{$resource:e,$q:i,API:t,ErrorHandler:a}),this[P]=this.ErrorHandler.catcher.bind(this.ErrorHandler),this.deferred=this.$q.defer()}return TagServiceBase.$inject=["$resource","$q","API","ErrorHandler"],(0,v["default"])(TagServiceBase,[{key:"tag",value:function tag(e){var i=this,t=this.$resource(this.API+"/keyword/:id/movies",{},{get:{cache:!0}});return this.$q(function(a,r){var n=t.get(e).$promise;n.then(function(e){return a(e)},function(e){return r(e),i[P](e.code)})})}}]),TagServiceBase}(),_=function(e){function TagService(){return(0,d["default"])(this,TagService),(0,o["default"])(this,(0,r["default"])(TagService).apply(this,arguments))}return(0,u["default"])(TagService,e),(0,v["default"])(TagService,[{key:"$get",value:function $get(e){return(0,p["default"])((0,r["default"])(TagService.prototype),"tag",this).call(this,e)}}]),TagService}(x);i["default"]=_},257:function(e,i,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var a=t(218),r=_interopRequireDefault(a),n=t(32),o=_interopRequireDefault(n),s=t(12),p=_interopRequireDefault(s),l=t(258),u=_interopRequireDefault(l),g=angular.module("app.pages.tag",[o["default"].name,p["default"].name]).service("TagApi",r["default"]).controller(u["default"].name,u["default"]);i["default"]=g.name},258:function(e,i,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var a=t(3),r=_interopRequireDefault(a),n=t(1),o=_interopRequireDefault(n),s=t(2),p=_interopRequireDefault(s),l=function(){function TagController(e,i,t,a){"ngInject";(0,o["default"])(this,TagController),(0,r["default"])(this,{$stateParams:e,$state:i,TagApi:t,RouterHelper:a}),this.paginationConfig={currentPage:this.$stateParams.page||1,itemsPerPage:20,pagesLength:9,state:i.current.name},this.title=e.name.replace(/\-/," "),this.description="Get the basic information for a specific keyword id.",this.RouterHelper.updateDocTitle("与"+this.title+"相关的电影"),this.activate()}return TagController.$inject=["$stateParams","$state","TagApi","RouterHelper"],(0,p["default"])(TagController,[{key:"activate",value:function activate(){var e=this,i=this.TagApi.$get({id:this.$stateParams.id,page:this.paginationConfig.currentPage});i.then(function(i){e.movies=i.results,e.totalResults=i.total_results,e.paginationConfig.totalItems=i.total_results,e.paginationConfig.currentPage=i.page})}}]),TagController}();i["default"]=l}});